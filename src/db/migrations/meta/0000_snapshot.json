{
  "id": "63ecf1bf-e945-4dd2-84dd-7093be2bd805",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.chess_analysis": {
      "name": "chess_analysis",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "game_id": {
          "name": "game_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "move_number": {
          "name": "move_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "position_fen": {
          "name": "position_fen",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "best_move": {
          "name": "best_move",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        },
        "evaluation": {
          "name": "evaluation",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "depth": {
          "name": "depth",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "engine_name": {
          "name": "engine_name",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'stockfish'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_analysis_game": {
          "name": "idx_analysis_game",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_analysis_evaluation": {
          "name": "idx_analysis_evaluation",
          "columns": [
            {
              "expression": "evaluation",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "chess_analysis_game_id_games_id_fk": {
          "name": "chess_analysis_game_id_games_id_fk",
          "tableFrom": "chess_analysis",
          "tableTo": "games",
          "columnsFrom": [
            "game_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_game_move_analysis": {
          "name": "unique_game_move_analysis",
          "nullsNotDistinct": false,
          "columns": [
            "game_id",
            "move_number"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "move_number_positive": {
          "name": "move_number_positive",
          "value": "\"chess_analysis\".\"move_number\" >= 0"
        },
        "depth_positive": {
          "name": "depth_positive",
          "value": "\"chess_analysis\".\"depth\" IS NULL OR \"chess_analysis\".\"depth\" > 0"
        },
        "evaluation_range": {
          "name": "evaluation_range",
          "value": "\"chess_analysis\".\"evaluation\" IS NULL OR (\"chess_analysis\".\"evaluation\" >= -99.99 AND \"chess_analysis\".\"evaluation\" <= 99.99)"
        }
      },
      "isRLSEnabled": false
    },
    "public.game_chats": {
      "name": "game_chats",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "game_id": {
          "name": "game_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "message_type": {
          "name": "message_type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'chat'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_chat_game_time": {
          "name": "idx_chat_game_time",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_chat_user": {
          "name": "idx_chat_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "game_chats_game_id_games_id_fk": {
          "name": "game_chats_game_id_games_id_fk",
          "tableFrom": "game_chats",
          "tableTo": "games",
          "columnsFrom": [
            "game_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "game_chats_user_id_users_id_fk": {
          "name": "game_chats_user_id_users_id_fk",
          "tableFrom": "game_chats",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "message_length": {
          "name": "message_length",
          "value": "length(\"game_chats\".\"message\") <= 500 AND length(\"game_chats\".\"message\") > 0"
        },
        "message_type_valid": {
          "name": "message_type_valid",
          "value": "\"game_chats\".\"message_type\" IN ('chat', 'draw_offer', 'draw_accept', 'draw_decline', 'resignation')"
        }
      },
      "isRLSEnabled": false
    },
    "public.game_moves": {
      "name": "game_moves",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "game_id": {
          "name": "game_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "move_number": {
          "name": "move_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "color": {
          "name": "color",
          "type": "varchar(5)",
          "primaryKey": false,
          "notNull": true
        },
        "from_square": {
          "name": "from_square",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": true
        },
        "to_square": {
          "name": "to_square",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": true
        },
        "piece_moved": {
          "name": "piece_moved",
          "type": "varchar(6)",
          "primaryKey": false,
          "notNull": true
        },
        "captured_piece": {
          "name": "captured_piece",
          "type": "varchar(6)",
          "primaryKey": false,
          "notNull": false
        },
        "is_castling": {
          "name": "is_castling",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_en_passant": {
          "name": "is_en_passant",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "promotion_piece": {
          "name": "promotion_piece",
          "type": "varchar(6)",
          "primaryKey": false,
          "notNull": false
        },
        "check_status": {
          "name": "check_status",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        },
        "move_notation": {
          "name": "move_notation",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "position_after": {
          "name": "position_after",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "time_taken": {
          "name": "time_taken",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "time_left": {
          "name": "time_left",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_moves_game_id": {
          "name": "idx_moves_game_id",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_moves_game_move": {
          "name": "idx_moves_game_move",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "move_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_moves_piece": {
          "name": "idx_moves_piece",
          "columns": [
            {
              "expression": "piece_moved",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_moves_created_at": {
          "name": "idx_moves_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "game_moves_game_id_games_id_fk": {
          "name": "game_moves_game_id_games_id_fk",
          "tableFrom": "game_moves",
          "tableTo": "games",
          "columnsFrom": [
            "game_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_game_move_color": {
          "name": "unique_game_move_color",
          "nullsNotDistinct": false,
          "columns": [
            "game_id",
            "move_number",
            "color"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "move_number_positive": {
          "name": "move_number_positive",
          "value": "\"game_moves\".\"move_number\" > 0"
        },
        "color_valid": {
          "name": "color_valid",
          "value": "\"game_moves\".\"color\" IN ('white', 'black')"
        },
        "from_square_valid": {
          "name": "from_square_valid",
          "value": "\"game_moves\".\"from_square\" ~ '^[a-h][1-8]$'"
        },
        "to_square_valid": {
          "name": "to_square_valid",
          "value": "\"game_moves\".\"to_square\" ~ '^[a-h][1-8]$'"
        },
        "piece_moved_valid": {
          "name": "piece_moved_valid",
          "value": "\"game_moves\".\"piece_moved\" IN ('pawn', 'rook', 'knight', 'bishop', 'queen', 'king')"
        },
        "captured_piece_valid": {
          "name": "captured_piece_valid",
          "value": "\"game_moves\".\"captured_piece\" IN ('pawn', 'rook', 'knight', 'bishop', 'queen') OR \"game_moves\".\"captured_piece\" IS NULL"
        },
        "promotion_piece_valid": {
          "name": "promotion_piece_valid",
          "value": "\"game_moves\".\"promotion_piece\" IN ('rook', 'knight', 'bishop', 'queen') OR \"game_moves\".\"promotion_piece\" IS NULL"
        },
        "check_status_valid": {
          "name": "check_status_valid",
          "value": "\"game_moves\".\"check_status\" IN ('check', 'checkmate') OR \"game_moves\".\"check_status\" IS NULL"
        },
        "time_left_positive": {
          "name": "time_left_positive",
          "value": "\"game_moves\".\"time_left\" >= 0"
        },
        "time_taken_positive": {
          "name": "time_taken_positive",
          "value": "\"game_moves\".\"time_taken\" IS NULL OR \"game_moves\".\"time_taken\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.games": {
      "name": "games",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "white_player_id": {
          "name": "white_player_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "black_player_id": {
          "name": "black_player_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'waiting'"
        },
        "time_control": {
          "name": "time_control",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{\"initial\": 600, \"increment\": 5}'::jsonb"
        },
        "winner_id": {
          "name": "winner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "result": {
          "name": "result",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        },
        "termination": {
          "name": "termination",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "ended_at": {
          "name": "ended_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "current_fen": {
          "name": "current_fen",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1'"
        },
        "game_pgn": {
          "name": "game_pgn",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "white_time_left": {
          "name": "white_time_left",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 600
        },
        "black_time_left": {
          "name": "black_time_left",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 600
        },
        "move_count": {
          "name": "move_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_move_at": {
          "name": "last_move_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_games_status": {
          "name": "idx_games_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_games_white_player": {
          "name": "idx_games_white_player",
          "columns": [
            {
              "expression": "white_player_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_games_black_player": {
          "name": "idx_games_black_player",
          "columns": [
            {
              "expression": "black_player_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_games_created_at": {
          "name": "idx_games_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_games_active_games": {
          "name": "idx_games_active_games",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"games\".\"status\" IN ('waiting', 'active')",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_games_completed": {
          "name": "idx_games_completed",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "ended_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"games\".\"status\" = 'completed'",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "games_white_player_id_users_id_fk": {
          "name": "games_white_player_id_users_id_fk",
          "tableFrom": "games",
          "tableTo": "users",
          "columnsFrom": [
            "white_player_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "games_black_player_id_users_id_fk": {
          "name": "games_black_player_id_users_id_fk",
          "tableFrom": "games",
          "tableTo": "users",
          "columnsFrom": [
            "black_player_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "games_winner_id_users_id_fk": {
          "name": "games_winner_id_users_id_fk",
          "tableFrom": "games",
          "tableTo": "users",
          "columnsFrom": [
            "winner_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "different_players": {
          "name": "different_players",
          "value": "\"games\".\"white_player_id\" != \"games\".\"black_player_id\""
        },
        "status_valid": {
          "name": "status_valid",
          "value": "\"games\".\"status\" IN ('waiting', 'active', 'completed', 'aborted', 'draw_offered', 'adjourned')"
        },
        "result_valid": {
          "name": "result_valid",
          "value": "\"games\".\"result\" IN ('1-0', '0-1', '1/2-1/2', '*') OR \"games\".\"result\" IS NULL"
        },
        "termination_valid": {
          "name": "termination_valid",
          "value": "\"games\".\"termination\" IN ('checkmate', 'resignation', 'timeout', 'draw_agreement', 'stalemate', 'insufficient_material', 'threefold_repetition', '50_move_rule', 'abandoned') OR \"games\".\"termination\" IS NULL"
        },
        "end_time_valid": {
          "name": "end_time_valid",
          "value": "\"games\".\"ended_at\" IS NULL OR \"games\".\"ended_at\" >= \"games\".\"started_at\""
        },
        "time_left_positive": {
          "name": "time_left_positive",
          "value": "\"games\".\"white_time_left\" >= 0 AND \"games\".\"black_time_left\" >= 0"
        },
        "move_count_positive": {
          "name": "move_count_positive",
          "value": "\"games\".\"move_count\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "username": {
          "name": "username",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "password_hash": {
          "name": "password_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "display_name": {
          "name": "display_name",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "bio": {
          "name": "bio",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country": {
          "name": "country",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": false
        },
        "elo_rating": {
          "name": "elo_rating",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1200
        },
        "games_played": {
          "name": "games_played",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "games_won": {
          "name": "games_won",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "games_drawn": {
          "name": "games_drawn",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "games_lost": {
          "name": "games_lost",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_online": {
          "name": "is_online",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "last_seen": {
          "name": "last_seen",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "account_type": {
          "name": "account_type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'free'"
        },
        "is_verified": {
          "name": "is_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "preferences": {
          "name": "preferences",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_users_elo_rating": {
          "name": "idx_users_elo_rating",
          "columns": [
            {
              "expression": "elo_rating",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_username": {
          "name": "idx_users_username",
          "columns": [
            {
              "expression": "username",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_email": {
          "name": "idx_users_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_online": {
          "name": "idx_users_online",
          "columns": [
            {
              "expression": "is_online",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "last_seen",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_country": {
          "name": "idx_users_country",
          "columns": [
            {
              "expression": "country",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_created_at": {
          "name": "idx_users_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_username_unique": {
          "name": "users_username_unique",
          "nullsNotDistinct": false,
          "columns": [
            "username"
          ]
        },
        "users_email_unique": {
          "name": "users_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "username_length": {
          "name": "username_length",
          "value": "length(\"users\".\"username\") >= 3"
        },
        "elo_rating_range": {
          "name": "elo_rating_range",
          "value": "\"users\".\"elo_rating\" >= 100 AND \"users\".\"elo_rating\" <= 3000"
        },
        "account_type_valid": {
          "name": "account_type_valid",
          "value": "\"users\".\"account_type\" IN ('free', 'premium', 'admin')"
        },
        "games_consistency": {
          "name": "games_consistency",
          "value": "\"users\".\"games_played\" = \"users\".\"games_won\" + \"users\".\"games_drawn\" + \"users\".\"games_lost\""
        }
      },
      "isRLSEnabled": false
    },
    "public.user_friends": {
      "name": "user_friends",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "friend_id": {
          "name": "friend_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_friends_user_status": {
          "name": "idx_friends_user_status",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_friends_friend_status": {
          "name": "idx_friends_friend_status",
          "columns": [
            {
              "expression": "friend_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_friends_user_id_users_id_fk": {
          "name": "user_friends_user_id_users_id_fk",
          "tableFrom": "user_friends",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_friends_friend_id_users_id_fk": {
          "name": "user_friends_friend_id_users_id_fk",
          "tableFrom": "user_friends",
          "tableTo": "users",
          "columnsFrom": [
            "friend_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_user_friend": {
          "name": "unique_user_friend",
          "nullsNotDistinct": false,
          "columns": [
            "user_id",
            "friend_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "different_users": {
          "name": "different_users",
          "value": "\"user_friends\".\"user_id\" != \"user_friends\".\"friend_id\""
        },
        "status_valid": {
          "name": "status_valid",
          "value": "\"user_friends\".\"status\" IN ('pending', 'accepted', 'declined', 'blocked')"
        }
      },
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}